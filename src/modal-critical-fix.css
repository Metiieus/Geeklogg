/* CORREÇÃO CRÍTICA: Bloquear completamente scroll da página quando modal estiver aberto */

/* Força todos os overlays de modal a não permitir scroll */
.fixed.inset-0[class*="modal"],
.fixed.inset-0[class*="backdrop"],
div[class*="fixed inset-0"] {
  overflow: hidden !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Garante que o body não role quando modal estiver aberto */
body.modal-open {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
  height: 100% !important;
}

/* Força centralização em TODOS os modais em mobile */
@media (max-width: 768px) {
  /* Overlay sempre centralizado */
  .fixed.inset-0 {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    overflow: hidden !important;
  }

  /* Container do modal sempre no centro */
  .fixed.inset-0 > div {
    margin: auto !important;
    max-height: calc(100vh - 1rem) !important;
    max-width: calc(100vw - 1rem) !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Força scroll interno apenas nos conteúdos dos modais */
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior: contain !important;
  }

  /* Remove qualquer scroll da página principal quando modal estiver ativo */
  body:has(.fixed.inset-0) {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
  }
}

/* Garante que modais com Framer Motion sejam centralizados */
div[data-framer-component] {
  margin: auto !important;
}

/* Força altura máxima em todos os contêineres de modal */
@media (max-width: 768px) {
  .bg-gradient-to-br[class*="slate"] {
    max-height: calc(100vh - 1rem) !important;
    display: flex !important;
    flex-direction: column !important;
  }
}

/* Previne bounce scroll no iOS */
@supports (-webkit-touch-callout: none) {
  .fixed.inset-0 {
    -webkit-overflow-scrolling: auto !important;
    overscroll-behavior: none !important;
  }
  
  body.modal-open {
    -webkit-overflow-scrolling: auto !important;
    overscroll-behavior: none !important;
  }
}

/* Garante que elementos Framer Motion não quebrem o layout */
.fixed.inset-0 [style*="transform"] {
  margin: auto !important;
}
